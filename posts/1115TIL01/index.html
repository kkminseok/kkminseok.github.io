<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="DNS(Domain Name System) 정리" /><meta name="author" content="minseok" /><meta property="og:locale" content="ko" /><meta name="description" content="오타, 지적 환영입니다." /><meta property="og:description" content="오타, 지적 환영입니다." /><link rel="canonical" href="https://kkminseok.github.io/posts/1115TIL01/" /><meta property="og:url" content="https://kkminseok.github.io/posts/1115TIL01/" /><meta property="og:site_name" content="민석강" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-11-15T01:02:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="DNS(Domain Name System) 정리" /><meta name="twitter:site" content="@none" /><meta name="twitter:creator" content="@minseok" /><meta name="google-site-verification" content="_icgy_j24DLYroQvKYTiffcqemP7ldWCxmrM2cGtYck" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"minseok"},"dateModified":"2022-11-15T01:02:00+09:00","datePublished":"2022-11-15T01:02:00+09:00","description":"오타, 지적 환영입니다.","headline":"DNS(Domain Name System) 정리","mainEntityOfPage":{"@type":"WebPage","@id":"https://kkminseok.github.io/posts/1115TIL01/"},"url":"https://kkminseok.github.io/posts/1115TIL01/"}</script><title>DNS(Domain Name System) 정리 | 민석강</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="민석강"><meta name="application-name" content="민석강"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/sample/logo.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">민석강</a></div><div class="site-subtitle font-italic">3년차 개발자. 40살에 100억벌고 은퇴</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/kkminseok" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/none" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['minseok19950727','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>DNS(Domain Name System) 정리</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>DNS(Domain Name System) 정리</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/kkminseok">minseok</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1668441720" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-11-15 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3818 words"> <em>21 min</em> read</span></div></div></div><div class="post-content"><blockquote class="prompt-info"><div><p>오타, 지적 환영입니다.</p></div></blockquote><blockquote class="prompt-tip"><div><p>✏️<a href="https://github.com/KHU-Dasom/jinja-study">CS스터디 저장소</a></p></div></blockquote><h1 id="dnsdomain-name-system">DNS(Domain Name System)</h1><h2 id="0-알아둬야하는-이유"><span class="mr-2">0. 알아둬야하는 이유</span><a href="#0-알아둬야하는-이유" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>네트워크 프로토콜은 크게 2가지로 나눔. 실제로 데이터를 실어나르는 <strong>데이터 프로토콜</strong>과 데이터 프로토콜이 잘 동작하도록 도와주는 <strong>컨트롤 프로토콜</strong><li><strong>컨트롤 프로토콜</strong>은 통신에 직접 관여하지는 않지만 처음 통신 관계를 맺거나 유지하는데 큰 도움을 줌.(ex: <code class="language-plaintext highlighter-rouge">ARP</code>,<code class="language-plaintext highlighter-rouge">ICMP</code>,<strong><code class="language-plaintext highlighter-rouge">DNS</code></strong>)</ul><p>DNS는 도메인주소를 IP로 변환하는 역할을 수행한다.<br /> 192.168.10.12같은 ip보다는 www.naver.com 등의 도메인 주소를 이용하는 것이 일반 사용자들에게 더 익숙하고 <strong>서버 IP 변경에 유연하게 대처가 가능하기 때문이다.</strong></p><p>또한, MSA기반의 서비스 설계가 많아지면서 다수의 API를 이용하다보니 서비스 간 API 호출이나 인터페이스가 많아져 DNS의 중요도는 더욱 높아짐.</p><hr /><h2 id="1-dns-소개"><span class="mr-2">1. DNS 소개</span><a href="#1-dns-소개" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><a href="http://202.179.177.21">http://202.179.177.21</a>와 같은 IP주소로도 사이트에 접속이 가능하고, <a href="http://www.naver.com">http://www.naver.com</a>과 같이 도메인 주소를 통해 사이트에 접속이 가능하다.</p><p>네트워크 통신에서는 202.179.177.21와 같은 IP주소를 이용하게 된다. 하지만 사용자는 이를 외우기도 힘들고, 사이트마다 이 IP주소를 외우는것은 사용자에게 좋은 경험을 선사해줄 수 없기에 의미 있는 문자열로 구성된 도메인 주소가 나오게 되었다.</p><p>도메인 주소를 사용할 경우 서비스 중인 IP가 변경되어도 도메인 주소 그대로 유지해 접속 방법 변경 없이 서비스할 수 있다는 장점도 있다.</p><p><img data-src="https://user-images.githubusercontent.com/30401054/201928404-6cc4927a-c284-4a6f-8333-c161dff047b6.png" alt="DNSImage" data-proofer-ignore></p><p>만약 DNS주소를 직접 입력하였다면 해당 DNS로 도메인에 대한 IP 질의를 보내고 그 결과값으로 요청한 도메인의 서비스 IP주소를 받게 된다.</p><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>[1]
          www.naver.com
client ------------------&gt;  DNS Server

[2]

         202.179.177.21
client &lt;-----------------   DNS Server   

[3]
          202.179.177.21
client ----------------------&gt;   naver.com (202.179.177.21 Server)
       &lt;----------------------
          Web Page
</pre></table></code></div></div><ul><li>내부 시스템의 서비스 간 연결에도 DNS가 쓰인다고 한다. 어느 한 서비스의 IP가 변경이 필요한 경우, 여러 가지 설정을 변경하거나 프로그램을 재배포 해야하는데, 도메인 주소를 사용하면 DNS서버에서 간단한 설정 변경으로 해결이 가능하다고 한다. 그렇기에 인터넷 연결을 위한 DNS와 내부 서비스를 위한 DNS를 분리하여 운영한다고 한다.</ul><hr /><h2 id="2-dns-구조와-명명-규칙"><span class="mr-2">2. DNS 구조와 명명 규칙</span><a href="#2-dns-구조와-명명-규칙" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>도메인은 계층 구조로 이루어져서 원하는 인터넷 주소를 효율적으로 찾아갈 수 있다.<li>역트리 구조로 최상위 루트부터 TOP-Level, Second-Level, Third-Level 순으로 찾아간다.<li>계층간의 구조를 <code class="language-plaintext highlighter-rouge">"."</code>으로 표시하고 <strong>뒤에서 앞으로 해석</strong>한다.<li>맨 뒤의 .(Root)는 생략된다.<li>알파벳, 숫자, ‘-‘만 사용이 가능하고, 대소문자 구분은 없다.</ul><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>[Third-Level]   [Second-Level]     [Top-Level]  [Root]
    www       .     naver        .     com        .(생략)
</pre></table></code></div></div><h3 id="21-루트-도메인"><span class="mr-2">2.1 루트 도메인</span><a href="#21-루트-도메인" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>DNS 서버는 사용자가 쿼리한 도메인에 대한 값을 직접 가지고 있거나 캐시에 저장된 정보를 사용하여 응답한다.<li>만약 DNS 서버에 해당 도메인의 정보가 없다면 루트 도메인을 관리하는 <strong>루트DNS</strong>에 쿼리하게 된다.<li>루트 DNS는 전세계에 13개가 있고 DNS 서버를 설치하면 루트 DNS의 IP주소를 기록한 힌트 파일을 가지고 있어 루트 DNS관련 별도 설정은 필요 없다.</ul><p><img data-src="https://user-images.githubusercontent.com/30401054/201928575-7e1cb0de-c266-48e0-9c94-9261b310aa0d.png" alt="rootDomainServer" data-proofer-ignore></p><h3 id="22-top-level-domaintld"><span class="mr-2">2.2 Top-Level Domain(TLD)</span><a href="#22-top-level-domaintld" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>IANA에서 구분한 6가지 유형으로 구분이 가능하다.</p><ul><li>Generic(gTLD): 특별한 제한없이 일반적으로 사용되는 최상위 도메인</ul><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>com: 일반 기업체
edu: 4년제 이상 교육기관
gov: 미국 연방정부기관
int: 국제기구, 기관
mil: 미국 연방군사기관
net: 네트워크 관련기관
org: 비영리기관
...
</pre></table></code></div></div><ul><li><p>Country Code TLD(ccTLD): 국가 최상위 도메인 보통 ISO 3166표준에 의해 규정되어 씀. 우리나라는 <code class="language-plaintext highlighter-rouge">kr</code> 보통 이를 사용하면 Second Level TLD에서 사이트 용도에 따른 코드를 사용한다. 예를들면 일반회사는 <code class="language-plaintext highlighter-rouge">co.kr</code>, 정부기관은 <code class="language-plaintext highlighter-rouge">go.kr</code> 나라마다 다르다.</p><li><p>Sponsored(sTLD): 특정 목적을 위한 스폰서를 두고 있는 최상위 도메인 ex) .aero, .asia …</p><li><p>Infrastructure: 운용상 중요한 인프라 식별자 공간을 지원하기 위해 전용으로 사용되는 최상위 도메인 ex) .arpa</p><li><p>Generic-Restricted(grTLD): 특정 기준을 충족하는 사람이나 단체가 사용할 수 있는 최상위 도메인 ex) .biz, .name …</p><li><p>Test(tTLD): 개발 프로세스 테스트용 최상위 도메인 ex) .test</p></ul><h2 id="3-dns-동작방식"><span class="mr-2">3. DNS 동작방식</span><a href="#3-dns-동작방식" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>도메인을 IP 주소로 변환하려면 DNS 서버에 질의해야하지만, 로컬에서 도메인과 IP 주소를 관리하는 <strong>hosts</strong>파일을 통해 사용할 수도 있다.</p><p>이 파일에 등록해두면 해당 도메인 리스트는 DNS 캐시에 저장된다.</p><p>도메인을 쿼리하면 DNS 캐시에 먼저 들려서 없으면 DNS 서버로 쿼리를 수행하고 그 결과를 다시 캐시에 저장한다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>ipconfig /displaydns 
<span class="c"># 를통해 DNS 캐시를 볼 수 있다.</span>
</pre></table></code></div></div><p>전 세계의 도메인 정보를 DNS 서버 하나에 저장할 수 없기에, DNS는 분산된 데이터베이스로 서로 도와주도록 설계가 되어있다.</p><p>자신이 가진 도메인 정보가 아니면 다른 DNS에 질의해 결과를 받는 형식이다.</p><p>예를 들어서 <strong>kmsdns.net</strong>이라는 도메인을 클라이언트가 DNS 서버에 쿼리를 보냈다고 한다.</p><ol><li>도메인 주소의 IP가 로컬 캐시에 저장되어있는지 확인.<li>저장되어 있지 않으면 사용자 호스트에 정의된 DNS에 해당 도메인에 대한 쿼리를 진행.<li>DNS 서버는 <strong>kmsdns.net</strong>가 로컬 캐시와 자체에 설정되어 있는지 확인하고 없으면 루트 도메인서버에 ‘.net’에 대한 정보를 가진 도메인 주소를 쿼리.<li>루트 DNS는 ‘.net’을 관리하는 네임 서버 정보를 DNS서버에 응답.<li>DNS 서버는 응답받은 정보를 가지고 <strong>kmsdns.net</strong>에 대해 쿼리를 보냄.<li><strong>kmsdns.net</strong>에 대한 정보를 가진 네임 서버 정보(가칭 kms)를 DNS 서버에 응답.<li>DNS 서버는 kms 네임 서버에 <strong>kmsdns.net</strong>에 대한 정보를 쿼리.<li>kms 네임 서버는 해당 도메인에 대한 정보를 DNS 서버에 응답.<li>DNS 서버는 응답받은 정보를 로컬 캐시에 저장하고 사용자 호스트에 <strong>kmsdns.net</strong>에 대한 정보를 응답.<li>사용자 호스트는 DNS로부터 받은 도메인에 대한 IP주소를 가지고 사이트에 접속하게 됨.</ol><hr /><h2 id="4-마스터와-슬레이브"><span class="mr-2">4. 마스터와 슬레이브</span><a href="#4-마스터와-슬레이브" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li><p>DNS 서버는 마스터(Master, Primary) 서버와 슬레이브(Slave, Secondary) 서버로 나눌 수 있다.</p><li><p>마스터 서버라서 우선순위가 더 높은게 아니라 <strong>도메인에 대한 존(Zone)</strong> 파일을 직접 관리하는지 여부에 따라 나뉜다.</p><li><p>마스터 서버는 존 파일을 직접 생성해 도메인 관련 정보를 관리한다.</p><li><p>슬레이브 서버는 마스터에 만들어진 존 파일을 복제한다. 이 과정을 <strong>영역 전송(Zone Transfer)</strong> 라고 한다.</p></ul><p>즉, 마스터 서버는 도메인 영역을 생성하고 레코드를 직접 관리하지만 슬레이브 서버는 마스터 서버에 설정된 도메인 영역과 레코드를 정기적으로 복제한다.</p><p><img data-src="https://user-images.githubusercontent.com/30401054/201928500-7f49e519-9f87-4e74-b9a0-b135fa275eee.png" alt="MasterSlave" data-proofer-ignore></p><blockquote><p>출처: <a href="https://computingforgeeks.com/configure-slave-bind-dns-server-on-ubuntu/">https://computingforgeeks.com/configure-slave-bind-dns-server-on-ubuntu/</a></p></blockquote><p>따라서 슬레이브 서버를 만들때에는 도메인을 복제해올 마스터 서버 정보를 입력해야 한다.</p><p>반대로 마스터 서버는 인가받지 않은 다른 DNS서버가 복제해가지 못하도록 슬레이브 서버를 지정해 복제를 제한할 수 있다. 무분별한 복제를 막기위해 설정해두는것을 추천한다고 한다.</p><p>DNS 서버는 마스터 서버에 문제가 발생하면 슬레이브 서버도 마스터서버에 대한 복제정보를 받아오지 못한다. 이를 <strong>만료 시간(Expiry Time)</strong>이라고 하고 SOA레코드에 설정된다.</p><p>만료 시간 안에 슬레이브 서버가 마스터 서버로부터 정보를 받아오지 못하면 슬레이브의 존 정보는 사용할 수 없게 된다.</p><p>따라서 만료 시간 안에 마스터 서버를 복구하거나 슬레이브 서버를 마스터로 전환해야 서비스 장애를 막을 수 있다.</p><hr /><h2 id="5-dns-주요-레코드"><span class="mr-2">5. DNS 주요 레코드</span><a href="#5-dns-주요-레코드" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>도메인에는 다양한 내용을 매핑할 수 있는 레코드들이 있다.</p><p>레코드란 도메인 서버를 직접 관리할시 사용자 요청에 대한 응답을 지정해줘야하는데 이 응답의 형식들을 말한다.</p><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>A(IPv4 Host): 도메인 주소를 IP(IPv4)로 매핑
AAAA(IPv6 Host): 도메인 주소를 IP(IPv6)로 매핑
CNAME(별칭): 도메인 주소에 대한 별칭
SOA(권한 시작): 본 영역 데이터에 대한 권한
NS(도메인의 네임서버): 본 영역에 대한 네임 서버
MX(메일 교환기): 도메인에 대한 메일 서버 정보(Mail eXchanger)
PTR(포인터): IP 주소를 도메인에 매핑(역방향)
TXT(레코드): 도메인에 대한 일반 텍스트
</pre></table></code></div></div><ul><li>A(IPv4): 기본 레코드, 하나의 A 레코드는 한 개의 도메인 주소와 한 개의 IP가 1:1로 매핑. 하나의 도메인이 여러 IP 주소와 매핑 가능. 반대도 가능</ul><p><img data-src="https://user-images.githubusercontent.com/30401054/201928306-43b99725-c9d3-47d0-ba17-b3762348e2a4.png" alt="ARecord" data-proofer-ignore></p><blockquote><p>출처: <a href="https://support.wix.com/ko/article/%EA%B8%B0%EB%B3%B8-a-%EB%B0%8F-cname-%EB%A0%88%EC%BD%94%EB%93%9C-%EC%9E%AC%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0">https://support.wix.com/ko/article/%EA%B8%B0%EB%B3%B8-a-%EB%B0%8F-cname-%EB%A0%88%EC%BD%94%EB%93%9C-%EC%9E%AC%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0</a></p></blockquote><ul><li><p>AAAA(IPv6): A레코드와 역할은 같음. IPv6 주소체계에 사용.</p><li><p>CNAME(Canonical Name): 레코드 값에 IP주소를 매핑하는 A 레코드와 달리 도메인 주소를 매핑. 네임서버가 CNAME레코드에 대한 질의를 받으면 CNAME 레코드에 설정된 도메인 정보를 확인하고 그 도메인 정보를 내부적으로 질의한 결과 IP를 응답한다. 대표적으로 <strong>www</strong>가 있다.</p></ul><p>예시로 kmsjava.net라는 웹사이트에 접속하려면 ‘kmsjava.net’이나 ‘www.kmsjava.net’을 입력할텐데 각각 A레코드로 입력하면 IP주소가 변경될 때 두 레코드 모두 변경해줘야하지만, ‘kmsjava.net’을 A 레코드로 ‘www.kmsjava.net’은 CNAME으로서 ‘kmsjava.net’을 매핑하면 IP 주소가 변경될 때에도 ‘kmsjava.net’ A레코드만 변경해주면 된다는 이점이 있다.</p><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre>[A레코드 각각 사용시]

------------IP 변경전--------------------

레코드                     값
kms.java.net              10.10.10.10
wwww.java.net             10.10.10.10

------------IP 변경후--------------------

레코드                     값
kms.java.net              20.20.20.20
wwww.java.net             20.20.20.20

---------------------------------------------------------------------

[CNAME과 A레코드 사용시]

------------IP 변경전--------------------

레코드                     값
kms.java.net              10.10.10.10
wwww.java.net(CNAME)      kms.java.net

------------IP 변경후--------------------

레코드                     값
kms.java.net              20.20.20.20
wwww.java.net(CNAME)      kms.java.net

</pre></table></code></div></div><ul><li><p>SOA(Start Of Authority): 도메인 영역에 대한 권한을 나타내는 레코드. 현재 네임 서버가 이 도메인 영역에 대한 관리 주제임을 의미 하므로 다른 네임 서버에 질의하지 않고 직접 응답한다. 도메인 영역 선언 시 SOA 레코드는 필수 항목이여서 반드시 만들어야한다. 또한 현재 도메인 관리에 필요한 속성값을 설정. 도메인 동기화에 필요한 타이머 값, TTL 값, 관리자 정보도 SOA 레코드에서 설정.</p><li><p>NS(Name Sever): 도메인에 대한 권한이 있는 네임 서버 정보를 설정하는 레코드.</p><li><p>MX(Mail eXchange): 메일 서버 구성시 사용되는 레코드.</p></ul><p><img data-src="https://user-images.githubusercontent.com/30401054/201928450-4ea50ff9-caf0-4081-b3ab-bd6ef27bed44.png" alt="dnslookup" data-proofer-ignore></p><blockquote><p>네이버의 MX 레코드</p></blockquote><p>네이버는 우선순위 10을 가지는 메일서버가 3개가 있음. 참고로 적을수록 우선순위가 높다.</p><p>이 경우 랜덤으로 메일서버로 요청을 보낸다.</p><ul><li><p>PTR(Pointer): A 레코드는 도메인 주소에 대한 질의를 IP로 응답받기 위한 레코드라면 PTR은 그 반대이다. IP 주소에 대한 질의로 도메인 주소로 응답하기 위한 레코드이다. A 레코드는 정방향 조회, PTR 레코드는 역방향 조회이다. A레코드와 달리 당연하겠지만 하나의 IP 주소에 대해 하나의 도메인 주소만 가질 수 있다. 보통 <strong>화이트 도메인</strong>구성용으로 사용된다.</p><li><p>TXT(TexT): 도메인에 대한 설명과 같이 텍스트를 입력할 수 있는 레코드. 공백 포함도 가능하고 대소문자 구분, 최대 255자 입력가능.</p></ul><hr /><h2 id="6-화이트-도메인"><span class="mr-2">6. 화이트 도메인</span><a href="#6-화이트-도메인" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>정상적인 도메인을 인증, 관리하는 제도가 <strong>화이트 도메인</strong><li>현재 보유하고 있는 도메인을 화이트 도메인으로 등록하려면 KISA RBL 사이트에서 등록하면 된다.<li><strong>SPF</strong>레코드를 미리 설정해야한다.<li><strong>SPF</strong>레코드를 통해 사전에 메일 서버 정보를 공개하면 수신 측 메일서버에서 해당 도메인을 통해 발송된 메일이 실제 메일서버에 등록된 정보와 일치하는지 확인. 일치하지 않을 경우 비정상적인 이메일 서버에서 정송된 것으로 간주해 해당 이메일을 수신하지 않고 스팸처리<li>SPF레코드를 작성하기 위해서는 TXT레코드를 사용해야함.</ul><p><img data-src="https://user-images.githubusercontent.com/30401054/201928631-967d17bb-0149-4b2d-b8bf-6cdfdff03a15.png" alt="spf" data-proofer-ignore></p><blockquote><p>출처: <a href="https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&amp;blogId=hilineisp&amp;logNo=220107284167">https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&amp;blogId=hilineisp&amp;logNo=220107284167</a></p></blockquote><p>요약하자면 위 IP로 들어온 메일을 제외하면 모두 폐기하라는 뜻.</p><h2 id="7-ttltime-to-live"><span class="mr-2">7. TTL(Time To Live)</span><a href="#7-ttltime-to-live" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>DNS에 질의해 응답받은 결과를 캐시에서 유지하는 시간을 의미한다.<li>DNS 서버에서 TTL 값을 늘리면 캐시된 정보가 많아서 응답 시간이 단축되지만, 해당 도메인 정보가 변경되었을때, 정보 갱신이 자주 일어나 그만큼 지연되는 단점이 있다. 그렇기에 적절히 조절하는것이 필요하다.</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/interview/'>Interview</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/interview/" class="post-tag no-text-decoration" >interview</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=DNS(Domain Name System) 정리 - 민석강&amp;url=https://kkminseok.github.io/posts/1115TIL01/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=DNS(Domain Name System) 정리 - 민석강&amp;u=https://kkminseok.github.io/posts/1115TIL01/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://kkminseok.github.io/posts/1115TIL01/&amp;text=DNS(Domain Name System) 정리 - 민석강" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/2023-03-06-dnd/">DND 8기 활동 후기</a><li><a href="/posts/2024-03-31-fastapi/">fastapi Swagger Response 분리하기</a><li><a href="/posts/2023-05-19-think01/">5월19일시점 개발하면서 고민한 것들 + 도커관련 이슈</a><li><a href="/posts/2023-05-02-Modern-Java-In-action/">2번 읽는 Modern Java In Action - Chapter06 스트림으로 데이터 수집</a><li><a href="/posts/2023-03-18-Modern-Java-In-Action/">2번 읽는 Modern Java In Action - Chapter01 기초</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/leetcode/">leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/baekjoon/">Baekjoon</a> <a class="post-tag" href="/tags/algorithmstudy/">AlgorithmStudy</a> <a class="post-tag" href="/tags/top100like/">Top100Like</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/fastapi/">FastAPI</a> <a class="post-tag" href="/tags/economy/">Economy</a> <a class="post-tag" href="/tags/dp/">DP</a> <a class="post-tag" href="/tags/top100interview/">Top100Interview</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/20221207InterviewBook01/"><div class="card-body"> <em class="timeago small" data-ts="1670346120" > 2022-12-07 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>가상 면접 사례로 배우는 대규모 시스템 설계 기초 1장 - 사용자 수에 따른 규모 확장성</h3><div class="text-muted small"><p> 가상 면접 사례로 배우는 대규모 시스템 설계 기초 책 정리 글입니다. 개요 원준이라는 친구가 나 공부 열심히하라고 책을 선물해줬다. 읽어보도록 했다. 1장은 한 명의 사용자를 지원하는 시스템에서 시작한다. ✏️ 단일 서버 웹브라우저, 웹 서버, DNS가 있을때 사용자의 요청 (웹 브라우저에서 요청을 보냄)이 어떻게 처리되는지를 알...</p></div></div></a></div><div class="card"> <a href="/posts/20221208InterviewBook02/"><div class="card-body"> <em class="timeago small" data-ts="1670432520" > 2022-12-08 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>가상 면접 사례로 배우는 대규모 시스템 설계 기초 2장 - 개략적인 규모 추정</h3><div class="text-muted small"><p> 가상 면접 사례로 배우는 대규모 시스템 설계 기초 책 정리 글입니다. 개요 이 장은 시스템 용량이나 성능 요구사항을 개략적으로 측정하는 방법에 대해 다룬다. 개략적 규모 추정을 효과적으로 필요한 기본기에 능숙해야 한다. 특히, 2의 제곱수나 응답지연(latency) 값, 그리고 가용성에 관계된 수치들을 기본적으로 잘 이해하고 있어야 한다고...</p></div></div></a></div><div class="card"> <a href="/posts/2022-12-09-InterviewBoo03/"><div class="card-body"> <em class="timeago small" data-ts="1670515320" > 2022-12-09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>가상 면접 사례로 배우는 대규모 시스템 설계 기초 3장 - 시스템 설계 면접 공략법</h3><div class="text-muted small"><p> 가상 면접 사례로 배우는 대규모 시스템 설계 기초 책 정리 글입니다. 개요 시스템 설계 면접은 두 명의 동료가 모호한 문제를 풀기 위해 협력하여 해결책을 찾아가는 과정이다. 때문에 정답도 없고 결과도 없다. 설계과정에서 내린 결정에 대해 방어하는 능력을 보는 과정이고, 면접관의 피드백을 건설적인 방향으로 처리할 자질이 있음을 보는 면접이다....</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Programmers_ORE1/" class="btn btn-outline-primary" prompt="Older"><p>Programmers_옹알이(1)(python)</p></a> <a href="/posts/20221117issue/" class="btn btn-outline-primary" prompt="Newer"><p>real-world프로젝트 이슈 - vuex state undefined</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "kkminseok/kkminseok.github.io", "data-repo-id": "MDEwOlJlcG9zaXRvcnkzNDUwNzI2OTM=", "data-category": "Announcements", "data-category-id": "DIC_kwDOFJFkNc4CO5-J", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/none">kang minseok</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/leetcode/">leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/baekjoon/">Baekjoon</a> <a class="post-tag" href="/tags/algorithmstudy/">AlgorithmStudy</a> <a class="post-tag" href="/tags/top100like/">Top100Like</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/fastapi/">FastAPI</a> <a class="post-tag" href="/tags/economy/">Economy</a> <a class="post-tag" href="/tags/dp/">DP</a> <a class="post-tag" href="/tags/top100interview/">Top100Interview</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-KMXXJ0D586"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-KMXXJ0D586'); }); </script>
