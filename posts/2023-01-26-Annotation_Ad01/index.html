<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Java Annotation 쓰는이유 중 하나" /><meta name="author" content="minseok" /><meta property="og:locale" content="ko" /><meta name="description" content="Annotation" /><meta property="og:description" content="Annotation" /><link rel="canonical" href="https://kkminseok.github.io/posts/2023-01-26-Annotation_Ad01/" /><meta property="og:url" content="https://kkminseok.github.io/posts/2023-01-26-Annotation_Ad01/" /><meta property="og:site_name" content="민석강" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-01-26T01:02:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Java Annotation 쓰는이유 중 하나" /><meta name="twitter:site" content="@none" /><meta name="twitter:creator" content="@minseok" /><meta name="google-site-verification" content="_icgy_j24DLYroQvKYTiffcqemP7ldWCxmrM2cGtYck" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"minseok"},"dateModified":"2023-01-26T01:02:00+09:00","datePublished":"2023-01-26T01:02:00+09:00","description":"Annotation","headline":"Java Annotation 쓰는이유 중 하나","mainEntityOfPage":{"@type":"WebPage","@id":"https://kkminseok.github.io/posts/2023-01-26-Annotation_Ad01/"},"url":"https://kkminseok.github.io/posts/2023-01-26-Annotation_Ad01/"}</script><title>Java Annotation 쓰는이유 중 하나 | 민석강</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="민석강"><meta name="application-name" content="민석강"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/sample/logo.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">민석강</a></div><div class="site-subtitle font-italic">3년차 개발자. 40살에 100억벌고 은퇴</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/kkminseok" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/none" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['minseok19950727','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Java Annotation 쓰는이유 중 하나</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Java Annotation 쓰는이유 중 하나</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/kkminseok">minseok</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1674662520" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2023-01-26 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3572 words"> <em>19 min</em> read</span></div></div></div><div class="post-content"><h1 id="annotation">Annotation</h1><h2 id="배경"><span class="mr-2">📃배경</span><a href="#배경" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>어노테이션의 의미는 ‘주석’이다. 주석은 코드로만 알기 힘든 내용이나 코드로 설명하기 어려운 디테일한 부분을 설명하기 위해 추가하기도 한다.</p><p>어노테이션은 그렇기에 소스코드 안에 다른 프로그램을 위한 정보를 미리 약속된 형식으로 포함시키기 위해 작성한다.</p><p>기존의 자바 웹 어플리케이션은 구성과 설정값들을 외부 XML설정 파일에 명시하여 프로그래밍 되었다. 외부에서 변경될 수 있는 값을 관리하기에 재컴파일 없이 쉽게 변경사항을 적용할 수 있었지만, 프로그램의 규모가 커질수록 설정을 다 적어줘야했고, 프로그램을 작성할때 마다 많은 설정을 작성해야했기에 문제점이 있었다. 이를 해결하기 위해 고안된 문법이 어노테이션이다. 어노테이션은 런타임 또는 컴파일에 어노테이션은 해석될 수 있다. 어노테이션은 보통 문서화, 컴파일러 체크, 코드 분석을 위한 용도로 사용되는데 본질적인 목적은 소스 코드에 메타데이터를 표현하는 것이다.</p><p>소스 코드에 메타데이터를 표현하다는 것은 정보에 대한 정보를 표시한다는 의미인데..</p><p>@Override라는 어노테이션은 보통 많이 접해봤으니까 이를 통해 설명을 하자면 <code class="language-plaintext highlighter-rouge">@Override</code> 어노테이션의 기능은 뒤에서도 설명하겠지만 명시적으로 이 함수가 오버라이딩 됨을 알려주고 오버라이딩을 하지 않으면 빨간 밑줄이 생기면서 컴파일러에서 경고를 해준다. 이것은 ‘이 함수는 오버라이딩 해야해!’라는 정보를 포함하고 있기에 함수(정보)에 대한 정보를 표시한다는 것이다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1">// Annotation을 사용한방식</span>
<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyService</span> <span class="o">{</span>
    <span class="c1">// ...</span>
<span class="o">}</span>

<span class="c1">//xml을 사용한 방식</span>
<span class="o">&lt;</span><span class="n">bean</span> <span class="n">id</span><span class="o">=</span><span class="s">"myService"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">MyService</span><span class="err">"</span><span class="o">&gt;</span>
   <span class="o">&lt;!--</span> <span class="o">...</span> <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="n">bean</span><span class="o">&gt;</span>

</pre></table></code></div></div><h2 id="종류"><span class="mr-2">📃종류</span><a href="#종류" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>어노테이션은 Java에 기본적으로 내장되어 있는 것들도 있는데, 이를 Built-in-Annotation이라고 한다. 주로 컴파일러를 위한 것으로 컴파일러에 유용한 정보를 준다.</p><p>대표적으로</p><h3 id="built-in-annotation"><span class="mr-2">Built-in-Annotation</span><a href="#built-in-annotation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><strong>@Override</strong></p><p>위에서 설명했지만 컴파일러에게 현재 메소드가 수퍼클래스의 메소드를 오버라이드한 메소드라는 것을 명시한다.</p><p>이를 통해 메소드 이름 오타나 오버라이딩을 하지 않으면 컴파일러가 잡아준다.</p><p><strong>@Deprecated</strong></p><p>차후 버전에 지원되지 않을 수 있기 때문에 더 이상 사용되지 말아야 할 메소드를 말한다.</p><p>예로는 최근 스프링에서 웹설정을 위한 어댑터에 @Deprecated가 달리게 되었다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nd">@Deprecated</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">WebSecurityConfigurerAdapter</span> <span class="kd">implements</span> <span class="nc">WebSecurityConfigurer</span><span class="o">&lt;</span><span class="nc">WebSecurity</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="o">...</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>@SupreesWarning</strong></p><p>프로그래머의 의도를 컴파일러에게 전달하여 경고를 제거한다.</p><p>회사에서 쓴걸 본 적이 있는데 이걸 지우면 노란줄(warning)이 뜨던것이 이 어노테이션을 달면 사라지는것을 알 수 있었다.</p><p><strong>@SafeVarargs</strong></p><p>@SupressWarning과 비슷한데, 변수나 타입에 대한 경고성도 무시한다는 의미다.</p><p><strong>@FunctionalInterface</strong></p><p>컴파일러에게 해당 인터페이스가 함수형 인터페이스라는 것을 알린다. @Override와 비슷하게 프로그래머가 실수를 하는것을 미연에 방지한다. 자바의 람다식은 함수형 인터페이스로만 접근이 가능하기 때문이다.</p><p><strong>@Native</strong></p><p>Java 8버전 이후의 새로운 어노테이션이다.</p><p>이는 필드에만 적용할 수 있고 native code영역과 관련이 있다는것을 명시적으로 알려준다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Integer</span> <span class="o">{</span>
    <span class="nd">@Native</span> <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">MIN_VALUE</span> <span class="o">=</span> <span class="mh">0x80000000</span><span class="o">;</span>
    <span class="c1">// omitted</span>
<span class="o">}</span>
</pre></table></code></div></div><p>네이티브 영역은 외부 언어로 작성된 파일을 저장하는 메모리 영역인데 보통 C언어로 작성되어 있기에 이를 명시하는 의미로 쓰인다. Native 메서드에서 참조되는 상수 앞에 붙인다고 한다.</p><h3 id="meta-annotation"><span class="mr-2">Meta-Annotation</span><a href="#meta-annotation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>어노테이션에 사용되는 어노테이션으로 해당 어노테이션의 동작대상을 결정한다. 주로 새로운 어노테이션을 정의할 때 사용한다.</p><p><strong>@Target</strong></p><p>어노테이션이 적용가능한 대상을 지정하는데 사용한다. {}를 통해 열거할 수도 있다. 패키지, 어노테이션, 멤버 변수 등에 따라 지정할 수 있다.</p><p><strong>@Retention</strong></p><p>어노테이션이 유지되는 기간을 지정한다. 세 가지 유지정책(retention policy)를 사용할 수 있다.</p><p>SOURCE : 소스코드(.java)까지 남아있는다. CLASS : 클래스 파일(.class)까지만 남아있는다. = 바이트 코드 RUNTIME : 런타임까지만 남아있는다. 이렇게만 설명하면 이해가 되지 않는다.</p><p>주의!! 레퍼런스가 있긴하지만 제 생각을 곁든 개인적인 견해입니다.</p><p>먼저 JVM이 동작하는 방식을 알아야할 필요가 있다.</p><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>      compile              load
.java    -&gt;     .class      -&gt;      classLoader in JVM
</pre></table></code></div></div><p>이렇게 되기에 SOURCE는 .java시점에 살아있고, CLASS는 .class시점에 살아있을것이고 실제 프로그램이 구동되면서는 런타임이 된것이므로 RUNTIME에 살아있을 것이다.</p><p>대표적으로 롬복의 @Getter는 정책이 SOURCE로 되어있는데 컴파일될 때 메서드들의 get()함수를 바이트코드로 생성해 컴파일을 시켜버리고 사라지게 되는것이다.</p><p>@NonNull의 정책은 CLASS인데 동작방식은 이게 붙어있는데 null을 넣게되면 노란색 경고로 프로그래머에게 알려주는 동작을 한다. Maven/Gradle로 다운받은 라이브러리와 같이 jar파일에는 소스가 포함되어 있지 않기에 SOURCE정책을 사용하는데에 한계가 있다. 이미 컴파일된 파일이기에 어노테이션 정보가 남아있지 않기 때문이다. 그렇기에 .class만 남아있는 라이브러리 경우에 대하여 타입체커, IDE부가기능 등을 사용할 수 있으려면 CLASS에 대한 정책이 필요하게 되는 것이다.</p><p>RUNTIME정책에 대해서는 자바의 Reflection API등을 통하여 런타임에 어노테이션 정보를 알 수 있다는 의미이다. @Controller, @Service와 같이 스프링이 올라오는 런타임 시점에 스캔이 컴포넌트 스캔이 가능해야하기에 RUNTIME정책을 필요로 한다.</p><p><strong>@Documented</strong></p><p>어노테이션에 대한 정보가 javadoc로 작성한 문서에 포함되도록 할 때 사용하는 어노테이션이다.</p><p><strong>@Inherited</strong></p><p>어노테이션이 자손 클래스에도 상속되도록 하는 어노테이션이다. 즉, 조상 클래스에 붙이면 자손 클래스도 이 어노테이션이 붙은것과 같이 인식된다.</p><h2 id="-커스텀-어노테이션-만들기"><span class="mr-2">📃 커스텀 어노테이션 만들기</span><a href="#-커스텀-어노테이션-만들기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>커스텀을 해주기 전에 어느상황에서 쓰일 수 있는지 알아야한다.</p><p>나는 스프링 시큐리티에서 제공하는 기능들을 사용했을때,</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nd">@GetMapping</span>
<span class="kd">public</span> <span class="nc">UserResponse</span> <span class="nf">currentUser</span><span class="o">(</span><span class="nd">@AuthenticationPrincipal</span> <span class="nc">UserAuth</span> <span class="n">userAuth</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">userService</span><span class="o">.</span><span class="na">getCurrentUser</span><span class="o">(</span><span class="n">userAuth</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>라는 코드를 테스트하고 싶었다. 하지만 테스트 코드에서는 <code class="language-plaintext highlighter-rouge">@AuthenticationPrincipal</code>로 들어와야하는 인자처리를 어떻게 할까?</p><p>크게 2가지 방법이 있지만 커스텀하기 쉬워서 대표적으로 쓰이는 방법 한가지를 쓰겠다.</p><p><code class="language-plaintext highlighter-rouge">User</code>객체는 <code class="language-plaintext highlighter-rouge">Id</code>, <code class="language-plaintext highlighter-rouge">email</code>,<code class="language-plaintext highlighter-rouge">username</code>의 필드를 가진다고 친다.</p><p>먼저 이를 해결하기 위해서는 유저정보를 스프링 시큐리티 컨텍스트에 넣고 이를 테스트할때 꺼내서 쓰거나 그래야할 것이다.</p><p>이 과정을 테스트 코드 거치기 전에 해줘야할 것인데 어떻게 해줄까?</p><p>가장 원론적인 방법은 다음과 같다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nc">UserAuth</span> <span class="n">userAuth</span> <span class="o">=</span> <span class="nc">UserAuth</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                            <span class="o">.</span><span class="na">username</span><span class="o">(</span><span class="s">"kms"</span><span class="o">)</span>
                            <span class="o">.</span><span class="na">email</span><span class="o">(</span><span class="s">"test@gmail.com"</span><span class="o">)</span>
                            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">Authentication</span> <span class="n">auth</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UsernamePasswordAuthenticationToken</span><span class="o">(</span><span class="n">userAuth</span><span class="o">,</span> <span class="s">""</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
<span class="nc">SecurityContextHolder</span><span class="o">.</span><span class="na">getContext</span><span class="o">().</span><span class="na">setAuthentication</span><span class="o">(</span><span class="n">auth</span><span class="o">);</span>
</pre></table></code></div></div><p>이런식으로 <code class="language-plaintext highlighter-rouge">UserAuth</code> 인스턴스를 만들어서 시큐리티 인증정보 컨택스트에 넣어주면 된다.</p><p>이 방식은 매 테스트코드마다 넣는것도 번거롭고, 필요한곳에만 가져다 쓰기에도 불편하다.</p><p>테스트코드위에 어노테이션을 달고, 그 부분에만 설정값을 컨택스트에 넣고 쓰면 좋을것 같다.</p><p>스프링 시큐리티에서는 <code class="language-plaintext highlighter-rouge">WithSecurityContextFactory</code>라는 인터페이스를 제공한다.</p><p>이 인터페이스를 사용하면 사용자 인증정보를 컨택스트에 넣을 수 있게 <strong>강제</strong>하는 인터페이스로, 어노테이션 타입과 하나의 메소드를 가진다. 그 메소드는 컨택스트 객체를 생성해야만 한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">WithSecurityContextFactory</span><span class="o">&lt;</span><span class="no">A</span> <span class="kd">extends</span> <span class="nc">Annotation</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nc">SecurityContext</span> <span class="nf">createSecurityContext</span><span class="o">(</span><span class="no">A</span> <span class="n">annotation</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>구현해야할 인자로 어노테이션 타입이 들어와야한다. 해당 어노테이션을 가지고 스프링 시큐리티 컨택스트에 유저정보 값을 넣어줄 것이다.</p><p>그러면 해당 어노테이션을 만들어야한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@WithSecurityContext</span><span class="o">(</span><span class="n">factory</span> <span class="o">=</span> <span class="nc">WithAuthUserSecurityContextFactory</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">WithAuthUser</span> <span class="o">{</span>
    <span class="kt">long</span> <span class="nf">id</span><span class="o">()</span> <span class="k">default</span> <span class="mi">1L</span><span class="o">;</span>
    <span class="nc">String</span> <span class="nf">email</span><span class="o">()</span> <span class="k">default</span> <span class="s">"test@gmail.com"</span><span class="o">;</span>
    <span class="nc">String</span> <span class="nf">username</span><span class="o">()</span> <span class="k">default</span> <span class="s">"kms"</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><ul><li>커스텀 어노테이션을 만들기 위해서는 <code class="language-plaintext highlighter-rouge">@interface</code>를 붙여야한다.<li><code class="language-plaintext highlighter-rouge">@Retention()</code>을 통해 해당 어노테이션이 런타임때까지 남아있어야한다고 한다.<li><code class="language-plaintext highlighter-rouge">@WithSecurityContext()</code>라는 어노테이션은 우리가 만들 <code class="language-plaintext highlighter-rouge">WithSecurityContextFactory</code>구현체 클래스 정보를 넣으면 된다. 즉, <code class="language-plaintext highlighter-rouge">WithAuthUserSecurityContextFactory</code>는 <code class="language-plaintext highlighter-rouge">WithSecurityContextFactory</code>를 구현한 구현체이다.</ul><p>이제 구현체를 만들어보겠다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WithAuthUserSecurityContextFactory</span> <span class="kd">implements</span> <span class="nc">WithSecurityContextFactory</span><span class="o">&lt;</span><span class="nc">WithAuthUser</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">SecurityContext</span> <span class="nf">createSecurityContext</span><span class="o">(</span><span class="nc">WithAuthUser</span> <span class="n">annotation</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Long</span> <span class="n">id</span> <span class="o">=</span> <span class="n">annotation</span><span class="o">.</span><span class="na">id</span><span class="o">();</span>
        <span class="nc">String</span> <span class="n">email</span> <span class="o">=</span>  <span class="n">annotation</span><span class="o">.</span><span class="na">email</span><span class="o">();</span>
        <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">annotation</span><span class="o">.</span><span class="na">username</span><span class="o">();</span>

        <span class="nc">UserAuth</span> <span class="n">userAuth</span> <span class="o">=</span> <span class="nc">UserAuth</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">email</span><span class="o">(</span><span class="n">email</span><span class="o">)</span>
                <span class="o">.</span><span class="na">username</span><span class="o">(</span><span class="n">username</span><span class="o">)</span>
                <span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="n">id</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="nc">Authentication</span> <span class="n">authentication</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UsernamePasswordAuthenticationToken</span><span class="o">(</span><span class="n">userAuth</span><span class="o">,</span><span class="s">""</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>
        <span class="nc">SecurityContext</span> <span class="n">context</span> <span class="o">=</span> <span class="nc">SecurityContextHolder</span><span class="o">.</span><span class="na">getContext</span><span class="o">();</span>
        <span class="n">context</span><span class="o">.</span><span class="na">setAuthentication</span><span class="o">(</span><span class="n">authentication</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">context</span><span class="o">;</span>

    <span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><p>인터페이스에서 어노테이션 타입을 받았으므로 우리가 만든 어노테이션을 인자로 넣어주고, 어노테이션에서 값을 꺼내서 컨택스트에 넣는 클래스로 볼 수 있다.</p><p>정리하자면 <code class="language-plaintext highlighter-rouge">WithSecurityContextFactory</code>는 스프링 시큐리티에서 제공하는 컨택스트에 유저정보를 넣고, 그 컨택스트를 반환하는 메소드를 구현하는 메소드를 강제하는 인터페이스이다.</p><p>이를 구현한 것이 <code class="language-plaintext highlighter-rouge">WithAuthUserSecurityContextFactory</code>이고 <strong>어노테이션</strong>을 인자로 받게 되어있고, 그 어노테이션은 개발자가 만든 커스텀 어노테이션이 되겠다.</p><p>그럼 어떤 방식으로 이 컨택스트를 테스트때마다 가져다 쓴다는 것인가?</p><p>그러면 <code class="language-plaintext highlighter-rouge">@WithSecurityContext(factory = WithAuthUserSecurityContextFactory.class)</code>의 의미는 무엇일까?</p><p><code class="language-plaintext highlighter-rouge">@WithSecurityContext()</code>라는 어노테이션은 다음과 같이 구현되어 있다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nd">@Target</span><span class="o">({</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">ANNOTATION_TYPE</span><span class="o">})</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Inherited</span>
<span class="nd">@Documented</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">WithSecurityContext</span> <span class="o">{</span>
    <span class="nc">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">WithSecurityContextFactory</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Annotation</span><span class="o">&gt;&gt;</span> <span class="nf">factory</span><span class="o">();</span>

    <span class="nc">TestExecutionEvent</span> <span class="nf">setupBefore</span><span class="o">()</span> <span class="k">default</span> <span class="nc">TestExecutionEvent</span><span class="o">.</span><span class="na">TEST_METHOD</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>위에서부터 해석을 하자면</p><ul><li><code class="language-plaintext highlighter-rouge">@Target({ElementType.ANNOTATION_TYPE})</code>: 어노테이션에 붙을 수 있다.<li><code class="language-plaintext highlighter-rouge">@Retention(RetentionPolicy.RUNTIME)</code>: 런타임때까지 살아있다. 이를 통해 <code class="language-plaintext highlighter-rouge">Refelction</code>을 사용할 수 있다.<li><code class="language-plaintext highlighter-rouge">@Inherited</code>: 상속을 가능하게 한다.<li><p><code class="language-plaintext highlighter-rouge">@Documented</code>: 문서화가 되어있다.</p><li><code class="language-plaintext highlighter-rouge">factory()</code>메서드는 구현된 <code class="language-plaintext highlighter-rouge">WithSecurityContextFactory</code>를 리턴하도록 되어있다.<li><code class="language-plaintext highlighter-rouge">setupBefore()</code>는 기본값으로 <code class="language-plaintext highlighter-rouge">TestExecutionEvent.TEST_METHOD</code>를 가지도록 되어있다. 이 뜻은 테스트 메서드가 수행되기 전에 어노테이션을 실행한다는 뜻이다.</ul><p>즉, 테스트 메서드가 실행되기 전에 <code class="language-plaintext highlighter-rouge">factory()</code>메서드에 반환된 컨택스트의 설정 및 초기화를 실행하고 해당 설정값을 가지고 테스트 메서드의 인증 과정을 수행한다.</p><h2 id="-해석"><span class="mr-2">📃 해석</span><a href="#-해석" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>아무런 정보가 없는데 해석을 어떻게 한 것인가? 사실 어노테이션의 내부 메서드 구현방식은 보기는 굉장히 까다롭다 IDE에서도 타고갈 수도 없기에 이를 해석하기 위해서는..</p><p>공식문서롤 보거나 여러 커뮤니티를 돌아다니면서 알아보거나 직접 여러 상황을 테스트코드를 작성해서 유추하거나 하는 등의 방법밖에 없다고 나는 알고 있다.</p><p>더 찾아봐도, 코드 단에서 내부 구현방식을 정확히 알기 위해서는 본인이 직접 유추하는 수 밖에 없다는 말이다.</p><p><img width="1698" alt="image" data-src="https://user-images.githubusercontent.com/30401054/214232944-d6acee78-f797-44ef-ba59-fb4ead65c773.png" data-proofer-ignore></p><p>왜 그런식으로 만들었을까? <strong>chatGPT</strong>의 말을 요약하자면 다음과 같이 정리할 수 있다.</p><p>우리가 인터페이스를 사용하는 이유와 비슷한데, 내부 구현은 외부 사용자에게 보여주지 않도로 함으로써, 캡슐화와 추상화를 보장하고 사용자 입장에서는 내부 구현방식을 몰라도 사용만 할 수 있게 만든다.</p><p>사실 <code class="language-plaintext highlighter-rouge">Reflection</code>을 통해서 어노테이션 속성값들을 찾고 그 내부구현을 유추할 수 있기도 한다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/interview/'>Interview</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/interview/" class="post-tag no-text-decoration" >interview</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Java Annotation 쓰는이유 중 하나 - 민석강&amp;url=https://kkminseok.github.io/posts/2023-01-26-Annotation_Ad01/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Java Annotation 쓰는이유 중 하나 - 민석강&amp;u=https://kkminseok.github.io/posts/2023-01-26-Annotation_Ad01/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://kkminseok.github.io/posts/2023-01-26-Annotation_Ad01/&amp;text=Java Annotation 쓰는이유 중 하나 - 민석강" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/2023-03-06-dnd/">DND 8기 활동 후기</a><li><a href="/posts/2024-03-31-fastapi/">fastapi Swagger Response 분리하기</a><li><a href="/posts/2023-05-19-think01/">5월19일시점 개발하면서 고민한 것들 + 도커관련 이슈</a><li><a href="/posts/2023-05-02-Modern-Java-In-action/">2번 읽는 Modern Java In Action - Chapter06 스트림으로 데이터 수집</a><li><a href="/posts/2023-03-18-Modern-Java-In-Action/">2번 읽는 Modern Java In Action - Chapter01 기초</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/leetcode/">leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/baekjoon/">Baekjoon</a> <a class="post-tag" href="/tags/algorithmstudy/">AlgorithmStudy</a> <a class="post-tag" href="/tags/top100like/">Top100Like</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/fastapi/">FastAPI</a> <a class="post-tag" href="/tags/economy/">Economy</a> <a class="post-tag" href="/tags/dp/">DP</a> <a class="post-tag" href="/tags/top100interview/">Top100Interview</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/20221207InterviewBook01/"><div class="card-body"> <em class="timeago small" data-ts="1670346120" > 2022-12-07 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>가상 면접 사례로 배우는 대규모 시스템 설계 기초 1장 - 사용자 수에 따른 규모 확장성</h3><div class="text-muted small"><p> 가상 면접 사례로 배우는 대규모 시스템 설계 기초 책 정리 글입니다. 개요 원준이라는 친구가 나 공부 열심히하라고 책을 선물해줬다. 읽어보도록 했다. 1장은 한 명의 사용자를 지원하는 시스템에서 시작한다. ✏️ 단일 서버 웹브라우저, 웹 서버, DNS가 있을때 사용자의 요청 (웹 브라우저에서 요청을 보냄)이 어떻게 처리되는지를 알...</p></div></div></a></div><div class="card"> <a href="/posts/20221208InterviewBook02/"><div class="card-body"> <em class="timeago small" data-ts="1670432520" > 2022-12-08 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>가상 면접 사례로 배우는 대규모 시스템 설계 기초 2장 - 개략적인 규모 추정</h3><div class="text-muted small"><p> 가상 면접 사례로 배우는 대규모 시스템 설계 기초 책 정리 글입니다. 개요 이 장은 시스템 용량이나 성능 요구사항을 개략적으로 측정하는 방법에 대해 다룬다. 개략적 규모 추정을 효과적으로 필요한 기본기에 능숙해야 한다. 특히, 2의 제곱수나 응답지연(latency) 값, 그리고 가용성에 관계된 수치들을 기본적으로 잘 이해하고 있어야 한다고...</p></div></div></a></div><div class="card"> <a href="/posts/2022-12-09-InterviewBoo03/"><div class="card-body"> <em class="timeago small" data-ts="1670515320" > 2022-12-09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>가상 면접 사례로 배우는 대규모 시스템 설계 기초 3장 - 시스템 설계 면접 공략법</h3><div class="text-muted small"><p> 가상 면접 사례로 배우는 대규모 시스템 설계 기초 책 정리 글입니다. 개요 시스템 설계 면접은 두 명의 동료가 모호한 문제를 풀기 위해 협력하여 해결책을 찾아가는 과정이다. 때문에 정답도 없고 결과도 없다. 설계과정에서 내린 결정에 대해 방어하는 능력을 보는 과정이고, 면접관의 피드백을 건설적인 방향으로 처리할 자질이 있음을 보는 면접이다....</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/2023-01-19-Reflection/" class="btn btn-outline-primary" prompt="Older"><p>Java Reflection 정리</p></a> <a href="/posts/2023-01-31-Annotation_AD/" class="btn btn-outline-primary" prompt="Newer"><p>Java Lombok @Get 직접 구현해보면서 프로세서 분석하기.</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "kkminseok/kkminseok.github.io", "data-repo-id": "MDEwOlJlcG9zaXRvcnkzNDUwNzI2OTM=", "data-category": "Announcements", "data-category-id": "DIC_kwDOFJFkNc4CO5-J", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/none">kang minseok</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/leetcode/">leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/baekjoon/">Baekjoon</a> <a class="post-tag" href="/tags/algorithmstudy/">AlgorithmStudy</a> <a class="post-tag" href="/tags/top100like/">Top100Like</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/fastapi/">FastAPI</a> <a class="post-tag" href="/tags/economy/">Economy</a> <a class="post-tag" href="/tags/dp/">DP</a> <a class="post-tag" href="/tags/top100interview/">Top100Interview</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-KMXXJ0D586"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-KMXXJ0D586'); }); </script>
